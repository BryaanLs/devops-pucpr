name: Notify Discord on Push

on:
  workflow_dispatch:
  push:

jobs:
  discord-notify:
    runs-on: ubuntu-latest

    steps:
      - name: Check out the repository
        uses: actions/checkout@v2

      - name: Send notification to Discord
        run: |
          curl -H "Content-Type: application/json" \
          -d '{
                "username": "GandalfğŸ’",
                "embeds": [{
                    "title": "ğŸ«¸ğŸ»| Novo push na branch: 'feature/awesome-feature'",
                    "description": "**ğŸ™‹ğŸ»| Autor:** 'johndoe'\n**ğŸ“¨| Mensagem:** 'Adiciona nova funcionalidade incrÃ­vel'",
                    "url": "https://github.com/my-repo/commit/1234567890abcdef",
                    "color": 3447003,
                    "fields": [
                    {
                        "name": "ğŸ“¦| Repository",
                        "value": "my-repo",
                        "inline": true
                    },
                    {
                        "name": "ğŸŒ¿| Branch",
                        "value": "feature/awesome-feature",
                        "inline": true
                    },
                    {
                        "name": "ğŸ”—| Commit URL",
                        "value": "ğŸ‘€| [View Commit](https://github.com/my-repo/commit/1234567890abcdef)"
                    }
                    ],
                    "footer": {
                    "text": "GitHub Actions",
                    "icon_url": "https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png"
                    },
                    "timestamp": "2024-09-17T12:34:56Z"
                    }]
            }' \
          "${{ secrets.DISCORD_WEBHOOK_URL }}"
